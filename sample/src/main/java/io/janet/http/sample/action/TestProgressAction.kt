package io.janet.http.sample.action

import io.janet.body.StringBody
import io.janet.http.model.MultipartRequestBody
import io.janet.http.sample.action.base.BaseAction
import io.janet.http.annotations.HttpAction
import io.janet.http.annotations.Part
import io.janet.http.annotations.Query
import io.janet.http.annotations.Response

@HttpAction(method = HttpAction.Method.POST, value = "/post", type = HttpAction.Type.MULTIPART)
data class TestProgressAction(
        @Query("dir") val dirParam: String = "janet",
        @Part("part_name1") val part1: MultipartRequestBody.PartBody = MultipartRequestBody.PartBody.Builder()
                .setBody(StringBody(CONTENT))
                .addHeader("filename", "content")
                .addHeader("X-Custom-Header", "blablabla")
                .build(),
        @Part("part_name2") val part2: String = "some_string_data",
        @Part("part_name3") val part3: String = "another_string_data"
) : BaseAction() {

    @Response
    lateinit var response: String

    override fun toString(): String {
        return "TestProgressAction(dirParam='$dirParam', part1=$part1, part2='$part2', part3='$part3'${if (::response.isInitialized) ", response='$response'" else ""})"
    }

}

//the large string instead of a file
private const val CONTENT = "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test" +
        "test-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-testtest-test-test-test-test-test-test-test-test"
